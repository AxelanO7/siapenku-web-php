import{T as O,d as p,o as b,e as h,b as s,w as n,a as t,l as c,v as f,u as e,g as i,t as m,F as C,h as S,n as v,j as M}from"./app-BKVklgcl.js";import Q from"./CustomAppLayout-D1_8-cfG.js";import{A as z}from"./auth_helper-C-Aylin_.js";import{_ as N,c as _}from"./index-CzCFa8x1.js";import{_ as U,a as B,C as K,b as $,c as P,d as D,e as j,f as A,g as V,h as L}from"./PopoverContent-q7yLgaOz.js";import{S as T}from"./sweetalert2.all-BnO6HLk3.js";import{C as F}from"./check-CJc47_-L.js";import"./CustomSidebar-CZelsswH.js";const X={class:"mx-12 mt-12 mb-8"},Y={class:"bg-white rounded-lg shadow-lg"},ee={class:"text-center font-medium text-xl pt-4 pb-8"},ae=t("div",{class:"flex items-center px-20 justify-center h-max relative py-6"},[t("img",{src:"/assets/images/kop.png",class:"h-28 w-28 absolute left-20"}),t("div",null,[t("h3",null," Formulir Pengajuan Surat Administrasi Desa Bulian "),t("h3",null,"Kecamatan Kabutambahan"),t("h3",null,"Banjar Dinas Dangin Margi")])],-1),le=t("hr",{class:"border-2 border-black my-4"},null,-1),te={class:"space-y-4 px-8 py-4 text-left"},se=t("label",{class:"text-base font-bold flex"},[i("Nama "),t("p",{class:"text-red-500 ml-1"},"*")],-1),ne=t("label",{class:"text-base font-bold flex"},[i(" Tempat Lahir "),t("p",{class:"text-red-500 ml-1"},"*")],-1),oe=t("label",{class:"text-base font-bold flex"},[i(" Tanggal Lahir "),t("p",{class:"text-red-500 ml-1"},"*")],-1),ie={class:"flex flex-col"},de=t("label",{class:"text-base font-bold flex"},[i(" Jenis Kelamin "),t("p",{class:"text-red-500 ml-1"},"*")],-1),re=t("label",{class:"text-base font-bold flex"},[i("Agama "),t("p",{class:"text-red-500 ml-1"},"*")],-1),ue=t("label",{class:"text-base font-bold flex"},[i("No. KK "),t("p",{class:"text-red-500 ml-1"},"*")],-1),ce=t("label",{class:"text-base font-bold flex"},[i("NIK "),t("p",{class:"text-red-500 ml-1"},"*")],-1),fe=t("label",{class:"text-base font-bold flex"},[i("Alamat "),t("p",{class:"text-red-500 ml-1"},"*")],-1),me=t("label",{class:"text-base font-bold flex"},[i("Kebangsaan "),t("p",{class:"text-red-500 ml-1"},"*")],-1),pe={class:"flex flex-col"},be=t("label",{class:"text-base font-bold flex"},[i(" Pekerjaan "),t("p",{class:"text-red-500 ml-1"},"*")],-1),he={class:"flex flex-col"},ve=t("label",{class:"text-base font-bold flex"},[i(" Status Perkawinan "),t("p",{class:"text-red-500 ml-1"},"*")],-1),_e=t("label",{class:"text-base font-bold flex"},[i("Keperluan "),t("p",{class:"text-red-500 ml-1"},"*")],-1),xe=t("label",{class:"text-base font-bold flex"},[i("Lampiran "),t("p",{class:"text-red-500 ml-1"},"*")],-1),ge={class:"flex justify-end mt-8"},ye=["disabled"],Pe={__name:"Submission",setup(we){const l=O({name:"",birthPlace:"",birthDate:"",gender:"",religion:"",familyCard:"",identityCard:"",address:"",nationality:"",needs:"",attachmentName:"",marital_status:"",profession:"",attachment:null}),H=async()=>{k.value=!0;const r=await z.getBaseUrl();M.post(`${r}/letter`,{name:l.name,birth_place:l.birthPlace,birth_date:l.birthDate,gender:l.gender,religion:l.religion,family_card:l.familyCard,identity_card:l.identityCard,address:l.address,nationality:l.nationality,needs:l.needs,attachment:l.attachmentName,marital_status:l.marital_status,profession:l.profession,status:"pending"}).then(o=>{T.fire({icon:"success",title:"Berhasil mengirimkan data",showConfirmButton:!1,timer:1500});const a=o.data.data.id;R(a,l.attachment)}).catch(o=>{T.fire({icon:"error",title:"Gagal mengirimkan data",showConfirmButton:!1,timer:1500})}),k.value=!1},J=async(r,o)=>{const a=await z.getBaseUrl(),d={name:l.name,birth_place:l.birthPlace,birth_date:l.birthDate,gender:l.gender,religion:l.religion,family_card:l.familyCard,identity_card:l.identityCard,address:l.address,nationality:l.nationality,needs:l.needs,attachment:o,marital_status:l.marital_status,profession:l.profession,status:"pending"};M.put(`${a}/letter/${r}`,d).then(u=>{console.log(u)}).catch(u=>{console.log(u)})},R=async(r,o)=>{const a=new FormData;a.append("file",o);const d=await z.getBaseUrl();M.post(`${d}/letter/file`,a,{headers:{"Content-Type":"multipart/form-data"}}).then(u=>{console.log(u);const q=u.data.data;J(r,q)}).catch(u=>{console.log(u)})},W=r=>{if(!/(\.pdf|\.png)$/i.exec(r.target.files[0].name)){T.fire({icon:"error",title:"File harus berupa pdf atau png",showConfirmButton:!1,timer:1500}),r.target.value="";return}if(r.target.files[0].size>2097152){T.fire({icon:"error",title:"File tidak boleh lebih dari 2MB",showConfirmButton:!1,timer:1500}),r.target.value="";return}l.attachmentName=r.target.files[0].name,l.attachment=r.target.files[0],console.log(l.attachment)},I=[{value:"l",label:"Laki-laki"},{value:"p",label:"Perempuan"}],E=[{value:"islam",label:"Islam"},{value:"kristen",label:"Kristen"},{value:"katolik",label:"Katolik"},{value:"hindu",label:"Hindu"},{value:"budha",label:"Budha"},{value:"konghucu",label:"Konghucu"}],Z=[{value:"Belum Menikah",label:"Belum Menikah"},{value:"Menikah",label:"Menikah"},{value:"Cerai",label:"Cerai"}],G=[{value:"pns",label:"PNS"},{value:"tni",label:"TNI"},{value:"polri",label:"Polri"},{value:"swasta",label:"Swasta"},{value:"wiraswasta",label:"Wiraswasta"},{value:"petani",label:"Petani"},{value:"nelayan",label:"Nelayan"},{value:"buruh",label:"Buruh"},{value:"lainnya",label:"Lainnya"}],x=p(!1),g=p(!1),y=p(!1),w=p(!1),k=p(!1);return(r,o)=>(b(),h("div",null,[s(Q,{title:"Submission"},{default:n(()=>[t("div",X,[t("div",Y,[t("div",ee,[ae,le,t("div",te,[t("div",null,[se,c(t("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>e(l).name=a),placeholder:"Nama",class:"border-gray-300 w-full rounded-md",oninput:"this.value = this.value.replace(/[^a-z A-Z]/g, '')"},null,512),[[f,e(l).name]])]),t("div",null,[ne,c(t("input",{"onUpdate:modelValue":o[1]||(o[1]=a=>e(l).birthPlace=a),placeholder:"Tempat Lahir",class:"border-gray-300 w-full rounded-md",oninput:"this.value = this.value.replace(/[^a-z A-Z]/g, '')"},null,512),[[f,e(l).birthPlace]])]),t("div",null,[oe,c(t("input",{type:"date","onUpdate:modelValue":o[2]||(o[2]=a=>e(l).birthDate=a),placeholder:"Tanggal Lahir",class:"border-gray-300 w-full rounded-md"},null,512),[[f,e(l).birthDate]])]),t("div",ie,[de,s(e(U),{open:x.value,"onUpdate:open":o[3]||(o[3]=a=>x.value=a)},{default:n(()=>[s(e(B),{"as-child":""},{default:n(()=>[s(e(N),{variant:"outline",role:"combobox","aria-expanded":x.value,class:"justify-between"},{default:n(()=>{var a;return[i(m(e(l).gender?(a=I.find(d=>d.value===e(l).gender))==null?void 0:a.label:"Jenis kelamin")+" ",1),s(e(K),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),_:1},8,["aria-expanded"])]),_:1}),s(e($),{class:"p-0"},{default:n(()=>[s(e(P),null,{default:n(()=>[s(e(D),{class:"h-9",placeholder:"Search..."}),s(e(j),null,{default:n(()=>[i("No data found")]),_:1}),s(e(A),null,{default:n(()=>[s(e(V),null,{default:n(()=>[(b(),h(C,null,S(I,a=>s(e(L),{key:a.value,value:a.value,onSelect:d=>{typeof d.detail.value=="string"&&(e(l).gender=d.detail.value),x.value=!1}},{default:n(()=>[i(m(a.label)+" ",1),s(e(F),{class:v(e(_)("ml-auto h-4 w-4",e(l).gender===a.value?"opacity-100":"opacity-0"))},null,8,["class"])]),_:2},1032,["value","onSelect"])),64))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),t("div",null,[re,s(e(U),{open:g.value,"onUpdate:open":o[4]||(o[4]=a=>g.value=a)},{default:n(()=>[s(e(B),{"as-child":""},{default:n(()=>[s(e(N),{variant:"outline",role:"combobox","aria-expanded":g.value,class:"w-full justify-between"},{default:n(()=>{var a;return[i(m(e(l).religion?(a=E.find(d=>d.value===e(l).religion))==null?void 0:a.label:"Agama")+" ",1),s(e(K),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),_:1},8,["aria-expanded"])]),_:1}),s(e($),{class:"p-0"},{default:n(()=>[s(e(P),null,{default:n(()=>[s(e(D),{class:"h-9",placeholder:"Search..."}),s(e(j),null,{default:n(()=>[i("No data found")]),_:1}),s(e(A),null,{default:n(()=>[s(e(V),null,{default:n(()=>[(b(),h(C,null,S(E,a=>s(e(L),{key:a.value,value:a.value,onSelect:d=>{typeof d.detail.value=="string"&&(e(l).religion=d.detail.value),g.value=!1}},{default:n(()=>[i(m(a.label)+" ",1),s(e(F),{class:v(e(_)("ml-auto h-4 w-4",e(l).religion===a.value?"opacity-100":"opacity-0"))},null,8,["class"])]),_:2},1032,["value","onSelect"])),64))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),t("div",null,[ue,c(t("input",{"onUpdate:modelValue":o[5]||(o[5]=a=>e(l).familyCard=a),type:"number",placeholder:"No. KK",class:"border-gray-300 w-full rounded-md"},null,512),[[f,e(l).familyCard]])]),t("div",null,[ce,c(t("input",{"onUpdate:modelValue":o[6]||(o[6]=a=>e(l).identityCard=a),type:"number",placeholder:"NIK",class:"border-gray-300 w-full rounded-md"},null,512),[[f,e(l).identityCard]])]),t("div",null,[fe,c(t("input",{"onUpdate:modelValue":o[7]||(o[7]=a=>e(l).address=a),placeholder:"Alamat",class:"border-gray-300 w-full rounded-md"},null,512),[[f,e(l).address]])]),t("div",null,[me,c(t("input",{"onUpdate:modelValue":o[8]||(o[8]=a=>e(l).nationality=a),placeholder:"Kebangsaan",class:"border-gray-300 w-full rounded-md",oninput:"this.value = this.value.replace(/[^a-z A-Z]/g, '')"},null,512),[[f,e(l).nationality]])]),t("div",pe,[be,s(e(U),{open:w.value,"onUpdate:open":o[9]||(o[9]=a=>w.value=a)},{default:n(()=>[s(e(B),{"as-child":""},{default:n(()=>[s(e(N),{variant:"outline",role:"combobox","aria-expanded":w.value,class:"justify-between"},{default:n(()=>{var a;return[i(m(e(l).profession?(a=G.find(d=>d.value===e(l).profession))==null?void 0:a.label:"Pekerjaan")+" ",1),s(e(K),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),_:1},8,["aria-expanded"])]),_:1}),s(e($),{class:"p-0"},{default:n(()=>[s(e(P),null,{default:n(()=>[s(e(D),{class:"h-9",placeholder:"Search..."}),s(e(j),null,{default:n(()=>[i("No data found")]),_:1}),s(e(A),null,{default:n(()=>[s(e(V),null,{default:n(()=>[(b(),h(C,null,S(G,a=>s(e(L),{key:a.value,value:a.value,onSelect:d=>{typeof d.detail.value=="string"&&(e(l).profession=d.detail.value),w.value=!1}},{default:n(()=>[i(m(a.label)+" ",1),s(e(F),{class:v(e(_)("ml-auto h-4 w-4",e(l).profession===a.value?"opacity-100":"opacity-0"))},null,8,["class"])]),_:2},1032,["value","onSelect"])),64))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),t("div",he,[ve,s(e(U),{open:y.value,"onUpdate:open":o[10]||(o[10]=a=>y.value=a)},{default:n(()=>[s(e(B),{"as-child":""},{default:n(()=>[s(e(N),{variant:"outline",role:"combobox","aria-expanded":y.value,class:"justify-between"},{default:n(()=>{var a;return[i(m(e(l).marital_status?(a=Z.find(d=>d.value===e(l).marital_status))==null?void 0:a.label:"Status Perkawinan")+" ",1),s(e(K),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),_:1},8,["aria-expanded"])]),_:1}),s(e($),{class:"p-0"},{default:n(()=>[s(e(P),null,{default:n(()=>[s(e(D),{class:"h-9",placeholder:"Search..."}),s(e(j),null,{default:n(()=>[i("No data found")]),_:1}),s(e(A),null,{default:n(()=>[s(e(V),null,{default:n(()=>[(b(),h(C,null,S(Z,a=>s(e(L),{key:a.value,value:a.value,onSelect:d=>{typeof d.detail.value=="string"&&(e(l).marital_status=d.detail.value),y.value=!1}},{default:n(()=>[i(m(a.label)+" ",1),s(e(F),{class:v(e(_)("ml-auto h-4 w-4",e(l).marital_status===a.value?"opacity-100":"opacity-0"))},null,8,["class"])]),_:2},1032,["value","onSelect"])),64))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),t("div",null,[_e,c(t("textarea",{"onUpdate:modelValue":o[11]||(o[11]=a=>e(l).needs=a),placeholder:"Keperluan",class:"border-gray-300 w-full rounded-md",rows:"4",style:{resize:"none"}},null,512),[[f,e(l).needs]])]),t("div",null,[xe,t("input",{type:"file",placeholder:"Lampiran",onChange:W,class:"border-gray-300 w-full text-sm"},null,32)])])])]),t("div",ge,[t("button",{class:v(e(_)("bg-black hover:bg-gray-700 text-white font-bold py-2 px-8 rounded transition duration-200 ease-in-out text-xl cursor-pointer hover:text-white",k.value?"opacity-50 cursor-not-allowed":"")),disabled:k.value,onClick:H}," Kirim ",10,ye)])])]),_:1})]))}};export{Pe as default};
