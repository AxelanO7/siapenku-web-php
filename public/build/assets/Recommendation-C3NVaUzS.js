import J from"./CustomAppLayout-QBafQ_c-.js";import{d as l,i as z,o as _,c as T,w as c,j as v,a,t as d,b as o,u as r,g as b,e as p,h as A,n as R,F as C}from"./app-CpjsP_cY.js";import{A as w}from"./auth_helper-HQJzgP8D.js";import{c as E}from"./utils-BvwMdcME.js";import{_ as M}from"./index-DKx9w9X0.js";import{C as O,_ as W,a as G,b as Q,c as X,d as Y,e as Z}from"./CommandList-cHPopKLx.js";import{a as aa,b as ea,_ as ta}from"./CustomSidebar-BI_vPfN3.js";import{S as K}from"./sweetalert2.all-Dh1GsHU8.js";import{C as sa}from"./check-GHFYy4Lx.js";const na={class:"m-12"},ra={class:"bg-white rounded-lg shadow-lg"},ia={class:"text-center font-medium text-xl pt-4 pb-8"},la=a("div",{class:"flex items-center px-20 justify-center h-max relative py-6"},[a("img",{src:"/assets/images/kop.png",class:"h-28 w-28 absolute left-20"}),a("div",null,[a("h3",null,"Pemerintahan Kabupaten Buleleng"),a("h3",null,"Kecamatan Kabutambahan"),a("h3",null,"Banjar Dinas Desa Bulian")])],-1),oa=a("hr",{class:"border-2 border-black my-4"},null,-1),ca={class:"flex items-center w-full justify-center space-x-4"},da=a("h3",null,"Surat Keterangan :",-1),ua=a("div",{class:"h-4"},null,-1),_a={class:"flex items-center w-full justify-center space-x-4"},ma=a("h3",null,"Nomor :",-1),ha=a("div",{class:"h-4"},null,-1),pa={class:"px-8 text-left"},fa=a("h3",{class:"mb-4"}," Saya yang bertanda tangan dibawah ini : ",-1),ga={class:"space-y-2"},va={class:"flex items-center"},ba=a("p",{class:"w-1/4"},"a. Nama",-1),wa=a("p",{class:"mx-4"},":",-1),xa={class:"flex"},ya=a("p",{class:"w-1/4"},"b. Jabatan",-1),Ka=a("p",{class:"mx-4"},":",-1),$a=["value"],Da=a("h3",{class:"my-4"},"Dengan ini menyatakan bahwa :",-1),Pa={class:"space-y-2"},ka={class:"flex text-left ml-8"},Ba={class:"w-1/3 flex"},La={class:"w-10"},Ta=["onClick"],Aa=["onClick"],Ca={key:1,class:"w-2/3"},Na=a("p",{class:"mt-12"}," Demikian surat keterangan ini dibuat untuk dipergunakan dengan semestinya. ",-1),ja={class:"flex justify-end"},Sa={class:"text-center"},Ia=a("p",null,"Kelian Banjar Dinas Desa Bulian",-1),Ua={class:"w-44 mx-auto p-1 rounded mt-4"},Va=["src"],qa={class:"mt-4"},Qa={__name:"Recommendation",setup(Fa){l(!1),l(""),l(!1),l("");const f=l(!1),h=l(""),g=l(),N=async()=>{const s=await w.getBaseUrl();v.get(`${s}/letter/${y}`).then(t=>{const i=t.data.data;m.value=i,j()}).catch(t=>{console.log(t)})},m=l(),$=l(),j=()=>{const s=m.value,t=Object.keys(s).reduce((i,e)=>(e!=="id"&&e!=="status"&&e!=="created_at"&&e!=="updated_at"&&e!=="no_letter"&&e!=="type_letter"&&e!=="name_witness"&&e!=="position_witness"&&e!=="kasi_id"&&e!=="kadus_id"&&e!=="kadus"&&e!=="kasi"&&s[e]!==null&&(i[e]=s[e]),i),{});$.value=t},S=async()=>{const s=await w.getBaseUrl();v.get(`${s}/kadus`).then(t=>{const i=t.data.data;x.value=i}).catch(t=>{console.log(t)})},x=l(),I=l(),U=async()=>{const s=await w.getBaseUrl();v.get(`${s}/letter/type/${y}`).then(t=>{I.value=t.data.data})},V=async()=>{const s=await w.getBaseUrl();let t=m.value;const i={kadus_id:h.value};t={...t,...i},t.status="sended",delete t.kasi,delete t.kadus,v.put(`${s}/letter/${y}`,t).then(e=>{console.log(e),K.fire({icon:"success",title:"Data berhasil dikirim",showConfirmButton:!1,timer:1500}),window.location.href="/village-chief/validate"}).catch(e=>{K.fire({icon:"error",title:"Data gagal dikirim",showConfirmButton:!1,timer:1500}),console.log(e)})},q=s=>{switch(s){case"id":return"ID";case"status":return"Status";case"created_at":return"Dibuat pada";case"updated_at":return"Diperbarui pada";case"nik":return"NIK";case"name":return"Nama";case"birth_place":return"Tempat Lahir";case"birth_date":return"Tanggal Lahir";case"gender":return"Jenis Kelamin";case"religion":return"Agama";case"address":return"Alamat";case"family_card":return"Nomor Kartu Keluarga";case"identity_card":return"Nomor KTP";case"nationality":return"Kewarganegaraan";case"marital_status":return"Status Perkawinan";case"profession":return"Pekerjaan";case"needs":return"Keperluan";case"attachment":return"Lampiran";case"type_submission":return"Jenis Pengajuan";case"att_family_card":return"Lampiran Kartu Keluarga";case"att_certificate":return"Lampiran Ijazah";case"att_rs":return"Lampiran Surat Keterangan Rumah Sakit";case"order_child":return"Anak ke";case"birth_attendant":return"Pembantu Kelahiran";case"address_attendant":return"Alamat Pembantu Kelahiran";case"identity_card_mother":return"Nomor KTP Ibu";case"name_mother":return"Nama Ibu";case"birth_place_mother":return"Tempat Lahir Ibu";case"birth_date_mother":return"Tanggal Lahir Ibu";case"address_mother":return"Alamat Ibu";case"identity_card_father":return"Nomor KTP Ayah";case"name_father":return"Nama Ayah";case"birth_place_father":return"Tempat Lahir Ayah";case"birth_date_father":return"Tanggal Lahir Ayah";case"address_father":return"Alamat Ayah";case"name_requester":return"Nama Pemohon";case"identity_card_requester":return"Nomor KTP Pemohon";case"address_requester":return"Alamat Pemohon";case"relationship_requester":return"Hubungan dengan Pemohon";case"date_death":return"Tanggal Kematian";case"village_death":return"Desa Kematian";case"sub_district_death":return"Kecamatan Kematian";case"district_death":return"Kabupaten Kematian";case"province_death":return"Provinsi Kematian";case"cause_death":return"Penyebab Kematian";default:return s}},D=s=>{K.fire({title:"Lampiran",text:s,imageUrl:`/files/${s}`,imageWidth:400,imageHeight:200,imageAlt:"Custom image"})},y=window.location.href.split("/").pop();return z(()=>{N(),S(),U()}),(s,t)=>(_(),T(J,{title:"Submission"},{default:c(()=>{var i,e,P,k,B,L;return[a("div",na,[a("div",ra,[a("div",ia,[la,oa,a("div",ca,[da,a("p",null,d((i=m.value)==null?void 0:i.type_letter),1)]),ua,a("div",_a,[ma,a("p",null,d((e=m.value)==null?void 0:e.no_letter),1)]),ha,a("div",pa,[fa,a("div",ga,[a("div",va,[ba,wa,o(r(ta),{open:f.value,"onUpdate:open":t[0]||(t[0]=n=>f.value=n)},{default:c(()=>[o(r(aa),{"as-child":""},{default:c(()=>[o(r(M),{variant:"outline",role:"combobox","aria-expanded":f.value,class:"justify-between w-3/4"},{default:c(()=>{var n;return[b(d(h.value?(n=x.value.find(u=>u.id===h.value))==null?void 0:n.name:"Pilih nama...")+" ",1),o(r(O),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),_:1},8,["aria-expanded"])]),_:1}),o(r(ea),{class:"w-[200px] p-0"},{default:c(()=>[o(r(W),null,{default:c(()=>[o(r(G),{class:"h-9",placeholder:"Cari nama..."}),o(r(Q),null,{default:c(()=>[b(" Tidak ada data ")]),_:1}),o(r(X),null,{default:c(()=>[o(r(Y),null,{default:c(()=>[(_(!0),p(C,null,A(x.value,n=>(_(),T(r(Z),{key:n.id,value:n.id,onSelect:u=>{typeof u.detail.value=="number"&&(h.value=u.detail.value),g.value=n,f.value=!1}},{default:c(()=>[b(d(n.name)+" ",1),o(r(sa),{class:R(r(E)("ml-auto h-4 w-4",h.value===n.id?"opacity-100":"opacity-0"))},null,8,["class"])]),_:2},1032,["value","onSelect"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),a("div",xa,[ya,Ka,a("input",{class:"w-3/4 rounded border border-gray-300",disabled:"",value:((P=g.value)==null?void 0:P.position)||"-"},null,8,$a)])]),Da,a("div",Pa,[(_(!0),p(C,null,A($.value,(n,u,F)=>(_(),p("div",null,[a("div",ka,[a("div",Ba,[a("h3",La,d(F+1)+".",1),a("h3",null,d(q(u)),1)]),u==="att_family_card"||u==="att_certificate"||u==="att_rs"?(_(),p("div",{key:0,class:"w-2/3 flex",onClick:H=>D(n)},[b(" : "),a("div",{class:"bg-gray-200 px-2 py-1 rounded cursor-pointer hover:bg-gray-300 transition duration-200 ease-in-out ml-1",onClick:H=>D(n)},d(n),9,Aa)],8,Ta)):(_(),p("div",Ca," : "+d(n),1))])]))),256))]),Na,a("div",ja,[a("div",Sa,[a("p",null," Bulian, "+d(new Date((k=m.value)==null?void 0:k.updated_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}).split("/").join("-")),1),Ia,a("div",Ua,[a("img",{src:`/assets/images/signature/${(B=g.value)==null?void 0:B.signature}`,alt:"tanda tangan",class:"w-full"},null,8,Va)]),a("p",qa,"("+d((L=g.value)==null?void 0:L.name)+")",1)])])])])]),a("div",{class:"flex justify-end mt-8"},[a("button",{class:"bg-black hover:bg-gray-700 text-white font-bold py-2 px-8 rounded transition duration-200 ease-in-out text-xl cursor-pointer hover:text-white",onClick:V}," Kirim ")])])]}),_:1}))}};export{Qa as default};
